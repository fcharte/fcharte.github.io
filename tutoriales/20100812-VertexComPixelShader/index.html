<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Cómo comunicar un &lt;i&gt;vertex shader&lt;/i&gt; con un &lt;i&gt;pixel shader&lt;/i&gt;&lt;br/&gt;&lt;p class=&quot;author&quot;&gt;by Francisco Charte.&lt;/p&gt; - Torre de Babel</title>

<link href="data:text/css,pre%20%2Eoperator%2C%0Apre%20%2Eparen%20%7B%0A%20color%3A%20rgb%28104%2C%20118%2C%20135%29%0A%7D%0A%0Apre%20%2Eliteral%20%7B%0A%20color%3A%20%23990073%0A%7D%0A%0Apre%20%2Enumber%20%7B%0A%20color%3A%20%23099%3B%0A%7D%0A%0Apre%20%2Ecomment%20%7B%0A%20color%3A%20%23998%3B%0A%20font%2Dstyle%3A%20italic%0A%7D%0A%0Apre%20%2Ekeyword%20%7B%0A%20color%3A%20%23900%3B%0A%20font%2Dweight%3A%20bold%0A%7D%0A%0Apre%20%2Eidentifier%20%7B%0A%20color%3A%20rgb%280%2C%200%2C%200%29%3B%0A%7D%0A%0Apre%20%2Estring%20%7B%0A%20color%3A%20%23d14%3B%0A%7D%0A" rel="stylesheet" type="text/css" />
<!--link rel="stylesheet" href="https://assets-cdn.github.com/assets/frameworks-148da7a2b8b9ad739a5a0b8b68683fed4ac7e50ce8185f17d86aa05e75ed376e.css"-->
<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css?family=Inconsolata|Source+Sans+Pro:400,400i,700" rel="stylesheet">
<link rel="stylesheet" href="https://fcharte.com/assets/css/monokai.css">

<link rel="stylesheet" href="https://fcharte.com/assets/css/numbersections.css">

<link rel="stylesheet" href="https://fcharte.com/assets/css/main.css">

  </head>
  <body class="layout-post">

    <header>
  <div class="inner header-inner">
    <a class="header-title" href="https://fcharte.com">Torre de Babel</a>
    <nav class="main-navigation">
  
  <a href="https://fcharte.com/about/">Sobre mí</a>
  
  <a href="https://fcharte.com/tutoriales/">Tutoriales</a>
  
  <a href="https://fcharte.com/manuales/">Manuales</a>
  
  <a href="https://fcharte.com/docencia/">Docencia</a>
  
  <a href="https://fcharte.com/publicaciones/">Publicaciones</a>
  
  <a href="https://fcharte.com/retrosotano/">Retrosótano</a>
  
</nav>

  </div>
</header>

    <div class="main">
      <div class="inner main-inner">
        <h1>Cómo comunicar un <i>vertex shader</i> con un <i>pixel shader</i><br/><p class="author">by Francisco Charte.</p></h1>

<article>
<ul class="section-nav">
</ul><p>Como se apuntó en un tutorial previo, los VS y PS pueden comunicarse a través de parámetros <code>varying</code>. Para ser más exactos habría que decir que el VS puede entregar información al PS, por ejemplo a través de los campos <code>gl_FrontColor</code> y <code>gl_TexCoord[N]</code>. También pueden declararse parámetros <code>varying</code> a medida, declarándolos antes de la función <code>main()</code> con la siguiente sintaxis:
<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">varying</span> <span class="n">tipo</span> <span class="n">nombre</span><span class="p">;</span></code></pre></figure>
</p><p>	Esta declaración se haría tanto en el VS como en el PS, de forma que el segundo pueda leer el valor asignado por el primero.</p>
<p>	El código siguiente es un ejemplo de VS en el que se modifica el parámetro uniforme <code>gl_FrontColor</code>, usado por el PS que genera por defecto <b>Shader Maker</b> para dar color a los fragmentos. Lo que se hace es aplicar una modificación periódica a cada componente, excepto el canal alfa. En este caso la posición de los vértices no se altera.</p>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">uniform</span> <span class="kt">float</span> <span class="n">time</span><span class="p">;</span> <span class="c1">// Tiempo que lleva ejecutándose el shader</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">vec4</span> <span class="n">v</span> <span class="o">=</span> <span class="n">gl_Vertex</span><span class="p">;</span> <span class="c1">// Tomamos el vertice de origen</span>

    <span class="c1">// Se aplica establece el vértice transformado como posición</span>
    <span class="n">gl_Position</span>    <span class="o">=</span> <span class="n">gl_ModelViewProjectionMatrix</span> <span class="o">*</span> <span class="n">gl_Vertex</span><span class="p">;</span>

    <span class="c1">// Se aplica una transformación variable y periódica</span>
    <span class="n">v</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">v</span><span class="p">.</span><span class="n">x</span> <span class="o">*</span> <span class="n">abs</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">time</span><span class="p">))</span> <span class="o">+</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">;</span>
    <span class="n">v</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">v</span><span class="p">.</span><span class="n">y</span> <span class="o">*</span> <span class="n">abs</span><span class="p">(</span><span class="n">cos</span><span class="p">(</span><span class="n">time</span><span class="p">))</span> <span class="o">+</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">;</span>
    <span class="n">v</span><span class="p">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">v</span><span class="p">.</span><span class="n">z</span> <span class="o">*</span> <span class="n">abs</span><span class="p">(</span><span class="n">sin</span><span class="p">(</span><span class="n">time</span><span class="p">))</span> <span class="o">+</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1</span><span class="p">;</span>

    <span class="c1">// Modificamos el color que se aplicara a las primitivas</span>
    <span class="n">gl_FrontColor</span>  <span class="o">=</span> <span class="n">vec4</span><span class="p">(</span><span class="n">v</span><span class="p">.</span><span class="n">xyz</span><span class="p">,</span><span class="mi">1</span><span class="p">.</span><span class="mi">0</span><span class="p">);</span></code></pre></figure>

	<p>	Al ejecutar este <i>shader</i> se verá cómo el color aplicado a la geometría va cambiando, algo que no es posible apreciar en una captura de pantalla. En el caso del cubo se produce una suave transición en los colores de cada esquina, variando del verde al robo, magenta, azul, negro, etc.</p>

<p>En la próxima entrega abordaremos el desarrollo de nuestro primer <i>pixel shader</i>.</p>
</article>

      </div>
    </div>

    <footer>
  <div class="inner footer-inner">
    <div>
      &copy; 1997-2025 Francisco Charte.
      
      <nav class="main-navigation">
  
  <a href="https://www.researchgate.net/profile/F_Charte">ResearchGate</a>
  
  <a href="http://orcid.org/0000-0002-3083-8942">ORCID</a>
  
  <a href="https://openalex.org/authors/a5066651833">OpenAlex</a>
  
  <a href="https://scholargps.com/scholars/45354499402455/francisco-charte">ScholarGPS</a>
  
  <a href="https://www.lens.org/lens/orcid/0000-0002-3083-8942/scholar">Lens</a>
  
  <a href="https://github.com/fcharte">GitHub</a>
  
  <a href="https://scholar.google.es/citations?user=i8l_80EAAAAJ&hl=es">Google Scholar</a>
  
  <a href="https://www.youtube.com/fcharte">YouTube!</a>
  
</nav>

      
    </div>
  </div>
</footer>


  </body>
</html>
