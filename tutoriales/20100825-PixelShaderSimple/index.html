<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Cómo programar un &lt;i&gt;pixel shader&lt;/i&gt; sencillo&lt;br/&gt;&lt;p class=&quot;author&quot;&gt;by Francisco Charte.&lt;/p&gt; - Torre de Babel</title>

<link href="data:text/css,pre%20%2Eoperator%2C%0Apre%20%2Eparen%20%7B%0A%20color%3A%20rgb%28104%2C%20118%2C%20135%29%0A%7D%0A%0Apre%20%2Eliteral%20%7B%0A%20color%3A%20%23990073%0A%7D%0A%0Apre%20%2Enumber%20%7B%0A%20color%3A%20%23099%3B%0A%7D%0A%0Apre%20%2Ecomment%20%7B%0A%20color%3A%20%23998%3B%0A%20font%2Dstyle%3A%20italic%0A%7D%0A%0Apre%20%2Ekeyword%20%7B%0A%20color%3A%20%23900%3B%0A%20font%2Dweight%3A%20bold%0A%7D%0A%0Apre%20%2Eidentifier%20%7B%0A%20color%3A%20rgb%280%2C%200%2C%200%29%3B%0A%7D%0A%0Apre%20%2Estring%20%7B%0A%20color%3A%20%23d14%3B%0A%7D%0A" rel="stylesheet" type="text/css" />
<!--link rel="stylesheet" href="https://assets-cdn.github.com/assets/frameworks-148da7a2b8b9ad739a5a0b8b68683fed4ac7e50ce8185f17d86aa05e75ed376e.css"-->
<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css?family=Inconsolata|Source+Sans+Pro:400,400i,700" rel="stylesheet">
<link rel="stylesheet" href="https://fcharte.com/assets/css/monokai.css">

<link rel="stylesheet" href="https://fcharte.com/assets/css/numbersections.css">

<link rel="stylesheet" href="https://fcharte.com/assets/css/main.css">

  </head>
  <body class="layout-post">

    <header>
  <div class="inner header-inner">
    <a class="header-title" href="https://fcharte.com">Torre de Babel</a>
    <nav class="main-navigation">
  
  <a href="https://fcharte.com/about/">Sobre mí</a>
  
  <a href="https://fcharte.com/tutoriales/">Tutoriales</a>
  
  <a href="https://fcharte.com/manuales/">Manuales</a>
  
  <a href="https://fcharte.com/docencia/">Docencia</a>
  
  <a href="https://fcharte.com/publicaciones/">Publicaciones</a>
  
  <a href="https://fcharte.com/retrosotano/">Retrosótano</a>
  
</nav>

  </div>
</header>

    <div class="main">
      <div class="inner main-inner">
        <h1>Cómo programar un <i>pixel shader</i> sencillo<br/><p class="author">by Francisco Charte.</p></h1>

<article>
<ul class="section-nav">
</ul><p>	Los PS son programas con una estructura muy similar a la de los VS, si bien los parámetros de entrada y salida sobre los que trabaja son diferentes. La finalidad de un PS básicamente es la de definir el color que tendrá un fragmento o pre-píxel, normalmente usando información procedente de la geometría, texturas, etc.</p>

<p>	El color de entrada se recibe en el parámetro <code>gl_Color</code>, que no debe confundirse con el parámetro del mismo nombre existente en los VS. Este parámetro contiene el color obtenido a través de una interpolación en la que intervienen los <i>varying</i> <code>gl_FrontColor</code> y <code>gl_BackColor</code>, normalmente establecidos por el VS, y la orientación que tenga la geometría a la que corresponde el fragmento.</p>




<p>	Los parámetros de salida del PS serán dos: <code>gl_FragColor</code> y <code>gl_FragDepth</code>. El primero indica el color a aplicar al fragmento, mientras que el segundo determina el valor que se escribirá en el buffer de profundidad.</p>

<p>	El caso más sencillo de PS es aquél en el que se asigna un valor constante al color de cada fragmento. Tomando como punto de partida el estado en el que se encuentra <b>Shader Maker</b> cuando es iniciado, el código del PS sería el que puede verse en la parte derecha de la figura inferior: la asignación a <code>gl_FragColor</code> de un vector constante. En el panel de la izquierda se ve el efecto sobre la famosa tetera: al tener todos los puntos el mismo color, no se aprecian bordes ni profundidad.</p>

<p style="text-align:center"><image src="http://www.fcharte.com/imagenes/ps1.png" alt="PS que asigna un color constante a cada fragmento"></image></p>

<p>	Lo habitual es que a <code>gl_FragColor</code> se le asigne el <i>varying</i> <code>gl_Color</code>, es decir, el color obtenido de la interpolación antes citada. Manipulando ese <code>gl_Color</code>, por ejemplo aplicando un factor multiplicativo, sería posible suavizar o potenciar los colores, según el parámetro empleado.</p>

<p>	Los efectos más interesantes se obtienen, como veremos en la próxima entrega, comunicando el PS con el VS. De esta forma es posible definir esquemas de coloreado e iluminación a medida. En la web es posible encontrar, por ejemplo, <i>shaders</i> que aplican el conocido esquema de <a href="http://en.wikipedia.org/wiki/Phong_shading">iluminación de Phong</a> usando un VS conjuntamente con un PS.</p>
</article>

      </div>
    </div>

    <footer>
  <div class="inner footer-inner">
    <div>
      &copy; 1997-2024 Francisco Charte.
      
      <nav class="main-navigation">
  
  <a href="https://www.researchgate.net/profile/F_Charte">ResearchGate</a>
  
  <a href="http://orcid.org/0000-0002-3083-8942">ORCID</a>
  
  <a href="https://github.com/fcharte">GitHub</a>
  
  <a href="https://scholar.google.es/citations?user=i8l_80EAAAAJ&hl=es">Google Scholar</a>
  
  <a href="https://www.youtube.com/fcharte">YouTube!</a>
  
</nav>

      
    </div>
  </div>
</footer>


  </body>
</html>
